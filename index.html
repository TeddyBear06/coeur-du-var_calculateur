<html>
<head>
	<title>Fréquence vidage fosse septique</title>
	<meta charset="UTF-8" />
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
</head>
<body>

	<div class="container">
		<div class="page-header" style="margin-top:0px;">
			<h1>Calculateur</h1>
			<p>Fréquence de vidage de fosse septique</p>
		</div>

		<form class="form-horizontal">
		  <div class="form-group">
		    <label for="volume" class="col-sm-2 control-label">Volume de la fosse (m3)</label>
		    <div class="col-sm-10">
		      <input type="text" class="form-control" id="volume" data-bind="value: volume, valueUpdate: 'afterkeydown'">
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="nbPersonne" class="col-sm-2 control-label">Nb. personne</label>
		    <div class="col-sm-10">
		      <input type="text" class="form-control" id="nbPersonne" data-bind="value: nbPersonne, valueUpdate: 'afterkeydown'">
		    </div>
		  </div>
		  <div class="form-group">
		    <div class="col-sm-offset-2 col-sm-10">
		      Fréquence vidage (en année) : <span style="font-size:2em;" data-bind="text: freqVidage"></span>
		    </div>
		  </div>
		</form>
	</div>

	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha256-Sk3nkD6mLTMOF0EOpNtsIry+s1CsaqQC1rVLTAy+0yc= sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>

	<script type="text/javascript">
	
		function Calculateur() {
		    this.volume = ko.observable('0');
		    this.nbPersonne = ko.observable('0');
		    this.freqVidage = ko.computed(function() {

		    	if( this.volume() != 0 && this.nbPersonne() != 0 ){
		    		var temp_volume = Math.round(this.volume()) * 1000;
			    	var temp_nbPersonne = this.nbPersonne();
			    	temp_nbPersonne = parseFloat(this.nbPersonne().replace(',','.').replace(' ',''));
			    	temp_result = (((temp_volume/2)/0.26)/temp_nbPersonne)/365;
			        return (Math.round(temp_result*2)/2).toFixed(1);
		    	}else{
		    		return 'Complétez les deux champs ci-dessus.';
		    	}
		    	
		    }, this);
		}

		ko.applyBindings( new Calculateur);

	</script>

</body>
</html>